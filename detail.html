<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é¤å»³è©³ç´°è³‡è¨Š</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
    }

    h1 {
      color: #ff5722;
    }

    img {
      width: 100%;
      max-width: 500px;
      height: 300px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .info {
      margin-top: 20px;
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    .info p {
      margin: 6px 0;
      font-size: 1rem;
    }

    a {
      color: #ff5722;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
  </style>
</head>

<body>

  <h1 id="name">è¼‰å…¥ä¸­...</h1>
  <img id="image" src="https://via.placeholder.com/500x300" alt="é¤å»³åœ–ç‰‡" />
  <div class="info" id="details"></div>

  <script>
    const priceMap = {
      1: "NT$100~200",
      2: "NT$200~400",
      3: "NT$400~600",
      4: "NT$600ä»¥ä¸Š"
    };

    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
      document.getElementById("details").innerHTML = "<p>æ‰¾ä¸åˆ°é¤å»³ID</p>";
    } else {
      // âœ… æ”¹æˆåŒæº API
      fetch(`/api/restaurants/${id}`)
        .then(res => res.json())
        .then(payload => {
          if (!payload.ok || !payload.data) {
            document.getElementById("details").innerHTML = "<p>æ‰¾ä¸åˆ°é¤å»³è³‡æ–™</p>";
            return;
          }

          const store = payload.data;

          document.getElementById("name").textContent = store.name || "ç„¡åç¨±";

          document.getElementById("image").src =
            "https://via.placeholder.com/500x300";

          document.getElementById("image").alt =
            store.name || "é¤å»³åœ–ç‰‡";

          const html = `
            ${store.address ? `<p>ğŸ“ åœ°å€: ${store.address}</p>` : ""}
            ${store.phone ? `<p>ğŸ“ é›»è©±: ${store.phone}</p>` : ""}
            ${
              store.rating != null
                ? `<p>â­ è©•åˆ†: ${store.rating} (${store.user_ratings_total || 0}äººè©•åˆ†)</p>`
                : ""
            }
            ${
              store.price_level != null
                ? `<p>ğŸ’² åƒ¹ä½: ${priceMap[store.price_level] || store.price_level}</p>`
                : ""
            }
            ${
              store.opening_now !== undefined && store.opening_now !== null
                ? `<p>ç‡Ÿæ¥­ä¸­: ${store.opening_now ? "æ˜¯" : "å¦"}</p>`
                : ""
            }
            ${store.business_status ? `<p>å•†å®¶ç‹€æ…‹: ${store.business_status}</p>` : ""}
            <p>å¤–é€: ${store.delivery ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å…§ç”¨: ${store.dine_in ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å¤–å¸¶: ${store.takeout ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å¯é ç´„: ${store.reservable ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>ç„¡éšœç¤™å…¥å£: ${store.wheelchair_accessible_entrance ? "âœ… æœ‰" : "âŒ ç„¡"}</p>
            ${store.details_fetched_at ? `<p>è³‡æ–™æ›´æ–°æ™‚é–“: ${store.details_fetched_at}</p>` : ""}
            ${store.google_maps_url ? `<p>ğŸŒ <a href="${store.google_maps_url}" target="_blank">Google åœ°åœ–</a></p>` : ""}
            ${store.website ? `<p>ğŸ”— <a href="${store.website}" target="_blank">å®˜æ–¹ç¶²ç«™</a></p>` : ""}
          `;

          document.getElementById("details").innerHTML = html;
        })
        .catch(err => {
          console.error("æŠ“è³‡æ–™å¤±æ•—", err);
          document.getElementById("details").innerHTML = "<p>æŠ“å–è³‡æ–™å¤±æ•—</p>";
        });
    }
  </script>

</body>
</html>